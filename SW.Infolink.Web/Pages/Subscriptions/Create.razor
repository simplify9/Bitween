@page "/subscriptions/create"

<CreateForm Title="Subscription" TModel="SubscriptionCreate" ApiUrl="subscriptions" ReturnUrl="subscriptions">
    
    <Field Name="@nameof(SubscriptionCreate.Type)" />
    <Field Name="@nameof(SubscriptionCreate.Name)" />

    @if (context.Type != SubscriptionType.Aggregation && context.Type != SubscriptionType.Unknown)
    {
        <Field Name="@nameof(SubscriptionCreate.DocumentId)" 
               Lookup="@Lookup.FromSearchy("documents")"
               Text="Document" />
    }

    @if (context.Type != SubscriptionType.Receiving)
    {
        <Field Name="@nameof(SubscriptionCreate.PartnerId)" 
               Lookup="@Lookup.FromSearchy("partners")" 
               Text="Partner" />
    }

    @if (context.Type == SubscriptionType.Aggregation)
    {
        <Field Name="@nameof(SubscriptionUpdate.AggregationForId)" 
               Lookup="@Lookup.From("subscriptions?lookup=true&filter=Type:1:1")"
               Text="Aggregate Subscription" />
    }
</CreateForm>

@code {

}
